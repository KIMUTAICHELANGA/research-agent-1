nginx  | /docker-entrypoint.sh: /docker-entrypoint.d/ is not empty, will attempt to perform configuration
nginx            | /docker-entrypoint.sh: Looking for shell scripts in /docker-entrypoint.d/
nginx            | /docker-entrypoint.sh: Launching /docker-entrypoint.d/10-listen-on-ipv6-by-default.sh
nginx            | 10-listen-on-ipv6-by-default.sh: info: Getting the checksum of /etc/nginx/conf.d/default.conf
nginx            | 10-listen-on-ipv6-by-default.sh: info: /etc/nginx/conf.d/default.conf differs from the packaged version
nginx            | /docker-entrypoint.sh: Sourcing /docker-entrypoint.d/15-local-resolvers.envsh
nginx            | /docker-entrypoint.sh: Launching /docker-entrypoint.d/20-envsubst-on-templates.sh
nginx            | /docker-entrypoint.sh: Launching /docker-entrypoint.d/30-tune-worker-processes.sh
research-server  | postgres:5432 is available
research-server  | 
research-server  | Collecting usage statistics. To deactivate, set browser.gatherUsageStats to False.
research-server  | 
research-server  | 
research-server  |   You can now view your Streamlit app in your browser.
research-server  | 
research-server  |   URL: http://0.0.0.0:8501
research-server  | 
research-server  | INFO - Successfully initialized spaCy model
research-server  | [nltk_data] Downloading package punkt to /root/nltk_data...
research-server  | [nltk_data]   Unzipping tokenizers/punkt.zip.
research-server  | 2025-02-01 15:00:04,636 - INFO - INIT_DB is true. Running database initialization.
research-server  | INFO:     Will watch for changes in these directories: ['/app']
research-server  | INFO:     Uvicorn running on http://0.0.0.0:8000 (Press CTRL+C to quit)
research-server  | INFO:     Started reloader process [7] using WatchFiles
research-server  | INFO - Successfully initialized spaCy model
research-server  | INFO:     Started server process [34]
research-server  | INFO:     Waiting for application startup.
research-server  | INFO:     Application startup complete.
research-server  | INFO - Successfully initialized spaCy model
research-server  | 2025-02-01 15:00:16,743 - ðŸ”µ INFO - Creating TokenUsageTracker singleton instance 138452827507984
research-server  | 2025-02-01 15:00:16,858 - ðŸ”µ INFO - Database connection initialized successfully
research-server  | 2025-02-01 15:00:16,893 - ðŸ”µ INFO - Retrieving analysis evaluations for query: None
research-server  | 2025-02-01 15:00:16,993 - ðŸ”µ INFO - Retrieving accuracy evaluations for query: None
research-server  | 2025-02-01 15:00:17,046 - ðŸ”µ INFO - Retrieving source coverage evaluations for query: None
postgres         | The files belonging to this database system will be owned by user "postgres".
postgres         | This user must also own the server process.
postgres         | 
postgres         | The database cluster will be initialized with locale "en_US.utf8".
postgres         | The default database encoding has accordingly been set to "UTF8".
postgres         | The default text search configuration will be set to "english".
postgres         | 
postgres         | Data page checksums are disabled.
postgres         | 
postgres         | fixing permissions on existing directory /var/lib/postgresql/data ... ok
postgres         | creating subdirectories ... ok
postgres         | selecting dynamic shared memory implementation ... posix
postgres         | selecting default max_connections ... 100
postgres         | selecting default shared_buffers ... 128MB
postgres         | selecting default time zone ... Etc/UTC
postgres         | creating configuration files ... ok
postgres         | running bootstrap script ... ok
postgres         | performing post-bootstrap initialization ... ok
postgres         | initdb: warning: enabling "trust" authentication for local connections
postgres         | initdb: hint: You can change this by editing pg_hba.conf or using the option -A, or --auth-local and --auth-host, the next time you run initdb.
postgres         | syncing data to disk ... ok
postgres         | 
postgres         | 
postgres         | Success. You can now start the database server using:
postgres         | 
postgres         |     pg_ctl -D /var/lib/postgresql/data -l logfile start
postgres         | 
postgres         | waiting for server to start....2025-02-01 14:59:55.159 UTC [48] LOG:  starting PostgreSQL 15.10 (Debian 15.10-1.pgdg120+1) on x86_64-pc-linux-gnu, compiled by gcc (Debian 12.2.0-14) 12.2.0, 64-bit
postgres         | 2025-02-01 14:59:55.164 UTC [48] LOG:  listening on Unix socket "/var/run/postgresql/.s.PGSQL.5432"
postgres         | 2025-02-01 14:59:55.172 UTC [51] LOG:  database system was shut down at 2025-02-01 14:59:54 UTC
postgres         | 2025-02-01 14:59:55.181 UTC [48] LOG:  database system is ready to accept connections
postgres         |  done
postgres         | server started
postgres         | CREATE DATABASE
postgres         | 
postgres         | 
postgres         | /usr/local/bin/docker-entrypoint.sh: ignoring /docker-entrypoint-initdb.d/*
postgres         | 
postgres         | 2025-02-01 14:59:55.395 UTC [48] LOG:  received fast shutdown request
postgres         | waiting for server to shut down....2025-02-01 14:59:55.404 UTC [48] LOG:  aborting any active transactions
postgres         | 2025-02-01 14:59:55.409 UTC [48] LOG:  background worker "logical replication launcher" (PID 54) exited with exit code 1
postgres         | 2025-02-01 14:59:55.414 UTC [49] LOG:  shutting down
postgres         | 2025-02-01 14:59:55.417 UTC [49] LOG:  checkpoint starting: shutdown immediate
postgres         | 2025-02-01 14:59:55.511 UTC [49] LOG:  checkpoint complete: wrote 918 buffers (5.6%); 0 WAL file(s) added, 0 removed, 0 recycled; write=0.016 s, sync=0.074 s, total=0.096 s; sync files=301, longest=0.061 s, average=0.001 s; distance=4222 kB, estimate=4222 kB
postgres         | 2025-02-01 14:59:55.523 UTC [48] LOG:  database system is shut down
postgres         |  done
postgres         | server stopped
postgres         | 
postgres         | PostgreSQL init process complete; ready for start up.
postgres         | 
postgres         | 2025-02-01 14:59:55.642 UTC [1] LOG:  starting PostgreSQL 15.10 (Debian 15.10-1.pgdg120+1) on x86_64-pc-linux-gnu, compiled by gcc (Debian 12.2.0-14) 12.2.0, 64-bit
postgres         | 2025-02-01 14:59:55.644 UTC [1] LOG:  listening on IPv4 address "0.0.0.0", port 5432
postgres         | 2025-02-01 14:59:55.644 UTC [1] LOG:  listening on IPv6 address "::", port 5432
postgres         | 2025-02-01 14:59:55.651 UTC [1] LOG:  listening on Unix socket "/var/run/postgresql/.s.PGSQL.5432"
postgres         | 2025-02-01 14:59:55.659 UTC [64] LOG:  database system was shut down at 2025-02-01 14:59:55 UTC
postgres         | 2025-02-01 14:59:55.666 UTC [1] LOG:  database system is ready to accept connections
postgres         | 2025-02-01 15:04:55.714 UTC [62] LOG:  checkpoint starting: time
postgres         | 2025-02-01 15:04:59.830 UTC [62] LOG:  checkpoint complete: wrote 44 buffers (0.3%); 0 WAL file(s) added, 0 removed, 0 recycled; write=4.108 s, sync=0.004 s, total=4.116 s; sync files=12, longest=0.002 s, average=0.001 s; distance=252 kB, estimate=252 kB
rstudio          | [s6-init] making user provided files available at /var/run/s6/etc...exited 0.
rstudio          | [s6-init] ensuring user provided files have correct perms...exited 0.
rstudio          | [fix-attrs.d] applying ownership & permissions fixes...
rstudio          | [fix-attrs.d] done.
rstudio          | [cont-init.d] executing container initialization scripts...
rstudio          | [cont-init.d] 01_set_env: executing... 
rstudio          | skipping /var/run/s6/container_environment/HOME
rstudio          | skipping /var/run/s6/container_environment/PASSWORD
rstudio          | skipping /var/run/s6/container_environment/RSTUDIO_VERSION
rstudio          | [cont-init.d] 01_set_env: exited 0.
rstudio          | [cont-init.d] 02_userconf: executing... 
rstudio          | [cont-init.d] 02_userconf: exited 0.
rstudio          | [cont-init.d] done.
rstudio          | [services.d] starting services
rstudio          | [services.d] done.
nginx            | /docker-entrypoint.sh: Configuration complete; ready for start up
nginx            | 2025/02/01 14:59:59 [notice] 1#1: using the "epoll" event method
nginx            | 2025/02/01 14:59:59 [notice] 1#1: nginx/1.27.3
nginx            | 2025/02/01 14:59:59 [notice] 1#1: built by gcc 12.2.0 (Debian 12.2.0-14) 
nginx            | 2025/02/01 14:59:59 [notice] 1#1: OS: Linux 6.5.0-1025-azure
nginx            | 2025/02/01 14:59:59 [notice] 1#1: getrlimit(RLIMIT_NOFILE): 1048576:1048576
nginx            | 2025/02/01 14:59:59 [notice] 1#1: start worker processes
nginx            | 2025/02/01 14:59:59 [notice] 1#1: start worker process 28
nginx            | 2025/02/01 14:59:59 [notice] 1#1: start worker process 29
nginx            | 172.18.0.1 - - [01/Feb/2025:15:06:12 +0000] "GET / HTTP/1.1" 200 4914 "https://bug-free-space-disco-q5gxrrrvp7rh9pj9.github.dev/" "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/132.0.0.0 Safari/537.36 Edg/132.0.0.0" "10.240.1.34"
nginx            | 172.18.0.1 - - [01/Feb/2025:15:06:13 +0000] "GET /api/datasets HTTP/1.1" 200 60 "https://bug-free-space-disco-q5gxrrrvp7rh9pj9-80.app.github.dev/" "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/132.0.0.0 Safari/537.36 Edg/132.0.0.0" "10.240.1.34"
nginx            | 172.18.0.1 - - [01/Feb/2025:15:06:13 +0000] "GET /api/prompts HTTP/1.1" 200 475 "https://bug-free-space-disco-q5gxrrrvp7rh9pj9-80.app.github.dev/" "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/132.0.0.0 Safari/537.36 Edg/132.0.0.0" "10.240.1.34"
nginx            | 172.18.0.1 - - [01/Feb/2025:15:06:29 +0000] "POST /api/analyze-data HTTP/1.1" 200 9315 "https://bug-free-space-disco-q5gxrrrvp7rh9pj9-80.app.github.dev/" "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/132.0.0.0 Safari/537.36 Edg/132.0.0.0" "10.240.1.34"
research-server  | 2025-02-01 15:00:17,086 - ðŸ”µ INFO - Retrieving logical coherence evaluations for query: None
research-server  | 2025-02-01 15:00:17,170 - ðŸ”µ INFO - Retrieving answer relevance evaluations for query: None
research-server  | Columns: ['id', 'query', 'timestamp', 'overall_score', 'rouge1_score', 'rouge2_score', 'rougeL_score', 'semantic_similarity', 'hallucination_score', 'suspicious_segments']
research-server  | INFO:     172.18.0.5:33612 - "GET / HTTP/1.0" 200 OK
research-server  | Looking for datasets in: /app/data
research-server  | Absolute path exists: True
research-server  | Is directory: True
research-server  | All files in directory: ['pat_app.csv', 'content.db', 'pat_fos.csv', 'lit_fos.csv', 'lit_trends.csv']
research-server  | Found CSV datasets: ['pat_app.csv', 'pat_fos.csv', 'lit_fos.csv', 'lit_trends.csv']
research-server  | INFO:     172.18.0.5:40812 - "GET /api/datasets HTTP/1.0" 200 OK
research-server  | INFO:     172.18.0.5:40824 - "GET /api/prompts HTTP/1.0" 200 OK
research-server  | 2025-02-01 15:06:27,926 - INFO - Creating TokenUsageTracker singleton instance 130656392573392
research-server  | Looking for datasets in: /app/data
research-server  | Found datasets: ['pat_app.csv', 'pat_fos.csv', 'lit_fos.csv', 'lit_trends.csv']
research-server  | 
research-server  | ==================================================
research-server  | Starting Tool Execution
research-server  | ==================================================
research-server  | Tool: Analysis Agent
research-server  | Query: tell me something about the data
research-server  | Prompt: research.txt
research-server  | 
research-server  | 2025-02-01 15:06:27,927 - INFO - Starting tool execution - Tool: Analysis Agent
research-server  | 2025-02-01 15:06:27,927 - INFO - Query received: tell me something about the data
research-server  | 2025-02-01 15:06:27,928 - INFO - Prompt selected: research.txt
research-server  | 2025-02-01 15:06:27,928 - INFO - Starting analysis for query: tell me something about the data
research-server  | Successfully initialized Analysis Evaluator
research-server  | 
research-server  | Executing Analysis Agent...
research-server  | Looking for datasets in: /app/data
research-server  | Found datasets: ['pat_app.csv', 'pat_fos.csv', 'lit_fos.csv', 'lit_trends.csv']
research-server  | 2025-02-01 15:06:27,931 - INFO - Data validation results: {'missing_data': {'description': 0, 'n': 0}, 'datatypes': {'description': dtype('O'), 'n': dtype('int64')}, 'row_count': 20, 'column_count': 2}
research-server  | 2025-02-01 15:06:27,943 - INFO - Start inference with model llama3-70b-8192 on host groq
research-server  | 2025-02-01 15:06:29,760 - INFO - HTTP Request: POST https://api.groq.com/openai/v1/chat/completions "HTTP/1.1 200 OK"
research-server  | 2025-02-01 15:06:29,763 - INFO - Inference completed in 1.82s
research-server  | 2025-02-01 15:06:29,763 - INFO - Tokens used - Input: 227, Output: 442, Total: 669
research-server  | 2025-02-01 15:06:29,764 - INFO - Processing speed - 367.41 tokens/second
research-server  | 2025-02-01 15:06:29,764 - INFO - Adding usage to instance 130656392573392
research-server  | 2025-02-01 15:06:29,764 - INFO - Adding new token usage entry - Model: llama3-70b-8192, Prompt ID: dynamic-prompt-business_insight.txt
research-server  | 2025-02-01 15:06:29,764 - INFO - Calculating costs using rates for model llama3-70b-8192
research-server  | 2025-02-01 15:06:29,764 - INFO - Calculated costs - Prompt: $0.000159, Completion: $0.000309, Total: $0.000468
research-server  | 2025-02-01 15:06:29,764 - INFO - Starting inference with model llama3-70b-8192 at 2025-02-01T15:06:29.764227
research-server  | 2025-02-01 15:06:29,764 - INFO - Inference completed in 0.50s
research-server  | 2025-02-01 15:06:29,764 - INFO - Tokens used - Input: 227, Output: 442, Total: 669
research-server  | 2025-02-01 15:06:29,764 - INFO - Processing speed - 1338.00 tokens/second
research-server  | 2025-02-01 15:06:29,764 - INFO - Usage timeline updated - Current entries: 1 for instance 130656392573392
research-server  | 2025-02-01 15:06:29,764 - INFO - Cumulative statistics updated - Total tokens: 669
research-server  | 
research-server  | === Analysis Results ===
research-server  | Analysis Metrics:
research-server  | - Numerical Accuracy: 0.00
research-server  | - Query Understanding: 0.71
research-server  | - Data Validation: 0.25
research-server  | - Reasoning Transparency: 0.00
research-server  | - Overall Score: 0.24
research-server  | 
research-server  | Detailed Metrics:
research-server  | - Term Coverage: 0.67
research-server  | - Calculation Examples: 0
research-server  | - Validation Checks: {
research-server  |   "missing_data_checked": false,
research-server  |   "outliers_checked": false,
research-server  |   "distribution_checked": false,
research-server  |   "data_types_checked": true
research-server  | }
research-server  | 2025-02-01 15:06:29,766 - ERROR - Error in reasoning transparency evaluation: 
research-server  | **********************************************************************
research-server  |   Resource [93mpunkt_tab[0m not found.
research-server  |   Please use the NLTK Downloader to obtain the resource:
research-server  | 
research-server  |   [31m>>> import nltk
research-server  |   >>> nltk.download('punkt_tab')
research-server  |   [0m
research-server  |   For more information see: https://www.nltk.org/data.html
research-server  | 
research-server  |   Attempted to load [93mtokenizers/punkt_tab/english/[0m
research-server  | 
research-server  |   Searched in:
research-server  |     - '/root/nltk_data'
research-server  |     - '/usr/local/nltk_data'
research-server  |     - '/usr/local/share/nltk_data'
research-server  |     - '/usr/local/lib/nltk_data'
research-server  |     - '/usr/share/nltk_data'
research-server  |     - '/usr/local/share/nltk_data'
research-server  |     - '/usr/lib/nltk_data'
research-server  |     - '/usr/local/lib/nltk_data'
research-server  | **********************************************************************
research-server  | 
research-server  | 2025-02-01 15:06:29,767 - INFO - Storing analysis evaluation
research-server  | 2025-02-01 15:06:29,779 - INFO - Getting stats from instance 130656392573392
research-server  | 
research-server  | Analysis results stored in database
research-server  | 
research-server  | ==================================================
research-server  | Execution Complete
research-server  | ==================================================
research-server  | Duration: 1.85 seconds
research-server  | 2025-02-01 15:06:29,779 - INFO - Processing 1 entries for instance 130656392573392
research-server  | 2025-02-01 15:06:29,779 - INFO - Final statistics compiled - Total tokens: 669, Total cost: $0.000468
research-server  | 
research-server  | === Token Usage Stats ===
research-server  | Total Tokens: 669
research-server  | 2025-02-01 15:06:29,779 - WARNING - Could not retrieve token stats: 'models'
research-server  | 2025-02-01 15:06:29,779 - INFO - Analysis Agent completed successfully
research-server  | 
research-server  | Warning: Could not retrieve token stats: 'models'
research-server  | 
research-server  | Analysis Agent completed successfully
research-server  | 2025-02-01 15:06:29,779 - INFO - Starting trace save operation - Trace ID: 681e99fa-1d5b-4ec6-b717-a9433edddb07
research-server  | 2025-02-01 15:06:29,779 - INFO - Getting stats from instance 130656392573392
research-server  | 2025-02-01 15:06:29,779 - INFO - Processing 1 entries for instance 130656392573392
research-server  | 2025-02-01 15:06:29,779 - INFO - Final statistics compiled - Total tokens: 669, Total cost: $0.000468
research-server  | 2025-02-01 15:06:29,779 - INFO - Validating trace data before save
research-server  | 2025-02-01 15:06:29,780 - INFO - Trace data size: 6,319 bytes
research-server  | 2025-02-01 15:06:29,780 - INFO - Trace successfully saved - Total tokens: 669
research-server  | 2025-02-01 15:06:29,780 - INFO - Processing time: 0.50s, Speed: 1338.00 tokens/second
research-server  | 2025-02-01 15:06:29,780 - INFO - Total cost: $0.000468
research-server  | 2025-02-01 15:06:29,780 - INFO - Closing database connection
research-server  | 
research-server  | Trace saved successfully
research-server  | INFO:     172.18.0.5:59650 - "POST /api/analyze-data HTTP/1.0" 200 OK
research-server  | 2025-02-01 15:06:41,130 - ðŸ”µ INFO - Retrieving analysis evaluations for query: None
research-server  | 2025-02-01 15:06:41,220 - ðŸ”µ INFO - Retrieving accuracy evaluations for query: None
research-server  | 2025-02-01 15:06:41,260 - ðŸ”µ INFO - Retrieving source coverage evaluations for query: None
research-server  | 2025-02-01 15:06:41,300 - ðŸ”µ INFO - Retrieving logical coherence evaluations for query: None
research-server  | 2025-02-01 15:06:41,351 - ðŸ”µ INFO - Retrieving answer relevance evaluations for query: None
research-server  | Columns: ['id', 'query', 'timestamp', 'overall_score', 'rouge1_score', 'rouge2_score', 'rougeL_score', 'semantic_similarity', 'hallucination_score', 'suspicious_segments']
